{"filter":false,"title":"buildspec.yml","tooltip":"/hello-server/buildspec.yml","undoManager":{"mark":4,"position":4,"stack":[[{"start":{"row":0,"column":0},"end":{"row":27,"column":0},"action":"remove","lines":["version: 0.2","","phases:","  pre_build:","    commands:","      - echo Logging in to Amazon ECR...","      - aws --version","      - $(aws ecr get-login --region $AWS_DEFAULT_REGION --no-include-email)","      - REPOSITORY_URI=208440353575.dkr.ecr.us-west-2.amazonaws.com/hello-server","      - COMMIT_HASH=$(echo $CODEBUILD_RESOLVED_SOURCE_VERSION | cut -c 1-7)","      - IMAGE_TAG=${COMMIT_HASH:=latest}","  build:","    commands:","      - echo Build started on `date`","      - echo Building the Docker image...","      - docker build -t $REPOSITORY_URI:latest .","      - docker tag $REPOSITORY_URI:latest $REPOSITORY_URI:$IMAGE_TAG","  post_build:","    commands:","      - echo Build completed on `date`","      - echo Pushing the Docker images...","      - docker push $REPOSITORY_URI:latest","      - docker push $REPOSITORY_URI:$IMAGE_TAG","      - echo Writing image definitions file...","      - printf '[{\"name\":\"hello-server\",\"imageUri\":\"%s\"}]' $REPOSITORY_URI:$IMAGE_TAG > imagedefinitions.json","artifacts:","    files: imagedefinitions.json",""],"id":2},{"start":{"row":0,"column":0},"end":{"row":36,"column":0},"action":"insert","lines":["version: 0.2","","env:","  exported-variables:","    - AWS_DEFAULT_REGION","","phases:","  pre_build:","    commands:","      - echo Logging in to Amazon ECR...","      - aws --version","      - $(aws ecr get-login --region $AWS_DEFAULT_REGION --no-include-email)","      - REPOSITORY_URI=<YOUR-REPO-DOMAIN-NAME>/hello-server","      - COMMIT_HASH=$(echo $CODEBUILD_RESOLVED_SOURCE_VERSION | cut -c 1-7)","      - IMAGE_TAG=${COMMIT_HASH:=latest}","  build:","    commands:","      - echo Build started on `date`","      - echo Building the Docker image...","      - docker build -t $REPOSITORY_URI\\:latest .","      - docker tag $REPOSITORY_URI\\:latest $REPOSITORY_URI:$IMAGE_TAG","  post_build:","    commands:","      - echo Build completed on `date`","      - echo Pushing the Docker images...","      - docker push $REPOSITORY_URI\\:latest","      - docker push $REPOSITORY_URI:$IMAGE_TAG","      - echo Writing image definitions file...","      - printf '[{\"name\":\"hello-server\",\"imageUri\":\"%s\"}]' $REPOSITORY_URI:$IMAGE_TAG > imagedefinitions.json","      - printf '{\"ImageURI\":\"%s\"}' $REPOSITORY_URI:$IMAGE_TAG > imageDetail.json","artifacts:","    files:","      - imagedefinitions.json","      - imageDetail.json","      - appspec.yaml","      - taskdef-prod.json",""]}],[{"start":{"row":35,"column":25},"end":{"row":36,"column":0},"action":"remove","lines":["",""],"id":3}],[{"start":{"row":12,"column":23},"end":{"row":12,"column":46},"action":"remove","lines":["<YOUR-REPO-DOMAIN-NAME>"],"id":4},{"start":{"row":12,"column":23},"end":{"row":12,"column":67},"action":"insert","lines":["208440353575.dkr.ecr.us-west-1.amazonaws.com"]}],[{"start":{"row":12,"column":52},"end":{"row":12,"column":53},"action":"remove","lines":["1"],"id":5}],[{"start":{"row":12,"column":52},"end":{"row":12,"column":53},"action":"insert","lines":["2"],"id":6}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":12,"column":53},"end":{"row":12,"column":53},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1690873380081,"hash":"a485842becd4c9120553dbadf95da9f7357a02c5"}